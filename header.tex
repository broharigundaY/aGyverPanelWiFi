\usepackage{listings}
\usepackage{color}

\definecolor{mygray}{rgb}{0.74,0.74,0.74}

\lstset{ %
  backgroundcolor=\color{mygray},  % choose the background color
  basicstyle=\footnotesize,        % size of fonts used for the code
  breaklines=true,                 % automatic line breaking only at whitespace
  captionpos=b,                    % sets the caption-position to bottom
  showstringspaces=false,          % do not underline spaces within strings
  frame=single,                    % put a frame around code block
  literate={"}{\textquotedbl}1 % Hopefully use non-curly quotation marks
}
  